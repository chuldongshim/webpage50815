<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-history/embed/controller/smartdoor/sd_spec">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">+ 기술문서 | Who am I and What should I do next...</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://github.com/webpage41221/docs/history/embed/controller/smartdoor/sd_spec"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="+ 기술문서 | Who am I and What should I do next..."><meta data-rh="true" name="description" content="23.02.02 ~ 23.04.25"><meta data-rh="true" property="og:description" content="23.02.02 ~ 23.04.25"><link data-rh="true" rel="icon" href="/webpage41221/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/webpage41221/docs/history/embed/controller/smartdoor/sd_spec"><link data-rh="true" rel="alternate" href="https://github.com/webpage41221/docs/history/embed/controller/smartdoor/sd_spec" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/webpage41221/docs/history/embed/controller/smartdoor/sd_spec" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/webpage41221/blog/rss.xml" title="Who am I and What should I do next... RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/webpage41221/blog/atom.xml" title="Who am I and What should I do next... Atom Feed"><link rel="stylesheet" href="/webpage41221/assets/css/styles.612a6376.css">
<link rel="preload" href="/webpage41221/assets/js/runtime~main.fd11567f.js" as="script">
<link rel="preload" href="/webpage41221/assets/js/main.df97d9e4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/webpage41221/"><div class="navbar__logo"><img src="/webpage41221/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/webpage41221/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">나는 개발자다!</b></a><a class="navbar__item navbar__link" href="/webpage41221/docs/introduce">자기소개</a><a class="navbar__item navbar__link" href="/webpage41221/docs/mycareer">경력요약</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/webpage41221/docs/history">경력상세</a><a class="navbar__item navbar__link" href="/webpage41221/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/chuldongshim/webpage41221/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">MyGitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/webpage41221/docs/history">임베디드</a><button aria-label="Toggle the collapsible sidebar category &#x27;임베디드&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/webpage41221/docs/history/embed/controller">제어기</a><button aria-label="Toggle the collapsible sidebar category &#x27;제어기&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage41221/docs/history/embed/controller/traindoor">열차 출입문 제어기</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/webpage41221/docs/history/embed/controller/smartdoor">스마트 도어</a><button aria-label="Toggle the collapsible sidebar category &#x27;스마트 도어&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage41221/docs/history/embed/controller/smartdoor/sd_guide">+ 사용법</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/webpage41221/docs/history/embed/controller/smartdoor/sd_spec">+ 기술문서</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage41221/docs/history/embed/controller/ethernetM">CAN이더넷 통신모듈 (Updating)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage41221/docs/history/embed/controller/kuve">무인전기차 제어기</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/webpage41221/docs/history/embed/controller/iap">펌웨어 업데이트</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/webpage41221/docs/history/embed/linux">리눅스</a><button aria-label="Toggle the collapsible sidebar category &#x27;리눅스&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/webpage41221/docs/history/embed/sensor">센서</a><button aria-label="Toggle the collapsible sidebar category &#x27;센서&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/webpage41221/docs/history/mbd">모델기반설계</a><button aria-label="Toggle the collapsible sidebar category &#x27;모델기반설계&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/webpage41221/docs/history/mbd/motor">모터구동</a><button aria-label="Toggle the collapsible sidebar category &#x27;모터구동&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/webpage41221/docs/history/mbd/logic">로직구현</a><button aria-label="Toggle the collapsible sidebar category &#x27;로직구현&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/webpage41221/docs/history/mbd/study">스터디</a><button aria-label="Toggle the collapsible sidebar category &#x27;스터디&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/webpage41221/docs/history/mbd/paper">논문</a><button aria-label="Toggle the collapsible sidebar category &#x27;논문&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/webpage41221/docs/history/proc">프로세스</a><button aria-label="Toggle the collapsible sidebar category &#x27;프로세스&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/webpage41221/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/webpage41221/docs/history"><span itemprop="name">임베디드</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/webpage41221/docs/history/embed/controller"><span itemprop="name">제어기</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/webpage41221/docs/history/embed/controller/smartdoor"><span itemprop="name">스마트 도어</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">+ 기술문서</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>+ 기술문서</h1></header><div align="right"><font size="4">23.02.02 ~ 23.04.25<br>3 month</font></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="개요">개요<a class="hash-link" href="#개요" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ews2-management">프로젝트 관리<a class="hash-link" href="#ews2-management" title="Direct link to heading">​</a></h3><p>개발기간 12주 동안 Agile 방식으로 개발이 진행되어 사용자 요구사항에 대한 추가/수정 발생할 경우 컨셉수정부터 코드구현 및 적용까지 민첩하게 대응할 수 있습니다.<br>
<!-- -->원격지에서 시스템 상테를 모니터링하고, 제어할 수 있는 솔루션 개발을 타겟으로 정하고 제품개발을 진행하였기 때문에 이와 비슷한 제품개발에 본 솔루션을 재활용할 수 있습니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_summary_plan-881c7582545b303ea62f616a1cffa32d.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="개발전략">개발전략<a class="hash-link" href="#개발전략" title="Direct link to heading">​</a></h3><p>본 제품개발 프로젝트는 기존에 수행된 2개의 프로젝트에 적용된 기술들을 통합하여 새로운 기능을 구현하는 컨셉으로 진행되었습니다.</p><ul><li>기존에 수행된 작업<ul><li>Kalman Filter학습 및 시뮬레이션</li><li>wifi 웹서버를 통한 STM MCU FW업데이트</li></ul></li><li>추가한 작업<ul><li>칼만필터 알고리즘을 Matlab/Simulink를 통해 C코드로 자동생성하여 MCU에 적용</li><li>도어상태판단 기능을 Simulink State-Machine Diagram으로 구현하고, C코드로 자동생성하여 MCU에 적용</li><li>웹페이지 Revision - 상태정보 확인, Self-OTA</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="시스템-사양">시스템 사양<a class="hash-link" href="#시스템-사양" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="주요기능">주요기능<a class="hash-link" href="#주요기능" title="Direct link to heading">​</a></h3><ul><li>현재 적용된 기능입니다.<ul><li>Kalman Filter를 통한 센서 신호 노이즈 필터링</li><li>MBD를 통한 필터 및 기능로직 코드 자동생성</li><li>https를 통한 웹서버 Secure 통신</li><li>열림/닫힘, 배터리전압 상태정보 원격 모니터링</li><li>펌웨어 원격 Secure 업데이트 (Self-OTA)</li><li>file server 및 file system을 통한 로깅정보 파일저장/업로드/다운로드</li><li>sntp 접속을 통한 rtc 시간 업데이트</li></ul></li><li>리비전(T.B.D) 시 보완되어야 할 기능입니다.<ul><li>BLE를 통한 Wifi 연결정보 설정</li><li>카메라를 통한 입력/출력 인원 카운트</li><li>원격 화면 모니터링</li><li>설정 및 Calibration에 따라 속도/가속도계를 통해 측정할 수 있는 다양한(창문, 회전문, 엘리베이터 위치 등) 상태정보 모니터링 기능 추가</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="열림닫힘-판단">열림/닫힘 판단<a class="hash-link" href="#열림닫힘-판단" title="Direct link to heading">​</a></h3><p>smartGaurd 시스템은 0(UnInit), 1(Closed), 2(Opening), 3(Opened), 4(Closing)와 같이 5개의 상태가 있으며, 최초 Power On 후 초기화가 진행되지 않거나, 오류가 발생하면 0(UnInit) 상태가 됩니다. 초기화 이후에는 도어의 움직임에 따라 자동으로 1~4 상태 중 하나의 상태가 됩니다.</p><p>smartGaurd mcu는 i2c 인터페이스로 mpu6050 센서의 3축의 각속도와 3축의 각가속도 정보를 수신합니다.</p><p align="center"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_hw_mcu_mpu6050-e0e64a2c86e612b67972c86ceef23b71.png" alt="Example banner" width="350" class="img_ev3q"></p><p>이렇게 수신된 가속도 정보를 통해 각도를 계산하는데, 가속도계의 drift 현상으로 측정오차가 발생하여 계산된 각도정보에도 오차가 발생하게 됩니다. 각도오차를 보정하기 위해 각속도정보를 추가로 이용하여 칼만필터링을 수행하며, 그 결과 측정오차 및 노이즈가 제거된 각도정보를 계산할 수 있습니다.</p><p align="center"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_func_kalman_logic-3c612f2e0b162c0d938877a5da09de15.png" alt="Example banner" width="550" class="img_ev3q"></p><p>다음은 각속도와 각가속도정보 입력으로 칼만필터 각도출력을 확인한 결과입니다.</p><p align="center"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_func_kalman_result-3b92070bf79e0c3770687eae6f578903.png" alt="Example banner" width="550" class="img_ev3q"></p><p>이렇게 센서를 통해 계산된 위치(각도) 및 속도 정보를 바탕으로 다음과 같이 State-Machine Diagram 기반으로 도어의 열림/닫힘 상태를 판단합니다. </p><p align="center"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sys_func_openclose_logic-6e037f6f516032cf5104c7011edd6bd1.png" alt="Example banner" width="550" class="img_ev3q"></p><p>다음은 최종 구현된 smartGaurd 시스템 출력을 모니터링하여 도어 움직임에 따라 상태정보가 자동으로 결정되는 것을 확인한 결과입니다.</p><p align="center"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sys_func_openclose_result-1aa858bf18a97e73b02b842a14a36b2b.png" alt="Example banner" width="300" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="로그인">로그인<a class="hash-link" href="#로그인" title="Direct link to heading">​</a></h3><p>smartGaurd WebServer는 HTTPS 통신을 통해 서버와 클라이언트가 연결되어, 인증서로 생성된 키값으로 패킷 암호화를 수행하여 통신을 수행하기 때문에 제3자가 통신 내용을 수신하더라도 패킷 내용을 복호화 할 수가 없어 통신내용 확인이 불가능합니다.  </p><p>wifi connection을 통해 서버와 연결이 되면 웹브라우저를 통해 웹서버 주소(<a href="https://192.168.4.1" target="_blank" rel="noopener noreferrer">https://192.168.4.1</a>) 로 접속합니다. 현재 smartGaurd WebServer는 공인된 인증기관으로부터 인증서를 발급받지 않았기 때문에 Self-Signed(안전하지 않은 연결) Connection을 통해 HTTPS연결을 수행해야 합니다(단, 비용을 지불하고 공인된 인증서를 발급받아 적용하면 정상적으로 안전한 HTTPS 통신을 수행할 수 있습니다).</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_html2_connect-397148a2048d64bf40096322112936bf.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><p>로그인은 POST 방식을 사용하며 로그인을 수행합니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_html3_login-ae1ee937bd5cd3a674e0296134bc0567.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><p>로그인에 성공하면 첫 화면으로 시스템을 간략히 설명하는 창이 활성화 됩니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_html4_homepg-9a60c2d17d9b31d4ce8fb41c26244964.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="상태정보-모니터링">상태정보 모니터링<a class="hash-link" href="#상태정보-모니터링" title="Direct link to heading">​</a></h3><p>모니터링 탭을 클릭하여 나타나는 창을 통해 도어의 열림/닫힘 상태 및 상태 변경시간을 확인할 수 있습니다. 인터넷이 연결되면 smartGuard는 sntp 서버에 접속하여 시간정보를 가져온 다음 내부 rtc time을 업데이트 합니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_html5_openclose-53bff68e2127387992df86ae9962ddc8.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="소프트웨어-업데이트">소프트웨어 업데이트<a class="hash-link" href="#소프트웨어-업데이트" title="Direct link to heading">​</a></h3><p>업데이트 탭을 클릭하면 두 섹션으로 구분되는 창이 나타나는데, 상부영역에서 SOTA(Master Self-OTA) 기능을 수행하고, 하부영역에서 FOTA(Slave FW-OTA) 기능을 수행합니다.</p><p>상부영역에 해당하는 SOTA에서 smartGaurd 자체 MCU의 소프트웨어를 업데이트 기능이 수행됩니다. local에 저장된 smartGuard MCU의 실행 가능한 이미지 파일을 선택한 다음 <!-- -->[start SOTA]<!-- --> 버튼을 클릭하면 업데이트가 수행되면서 버튼 아래에 진행상태가 나타난다. 업데이트가 완료되면 MCU는 자동으로 재부팅을 수행하여 업데이트 된 이미지를 수행한다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_html6_ota-225f67427ccd3daa7a6f8d92e6ee6c02.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><p>하부영역에 해당하는 FOTA에서 smartGaurd와 연결된 MCU의 소프트웨어를 업데이트 할 수 있습니다. 이 기능은 무선통신 기능 없이 smartGaurd와 유선으로 연결된 장비를 원격에서 업데이트 하기 위해 준비된 기능힙니다.
<!-- -->[업데이트 창 - FOTA 설명]</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hw사양">HW사양<a class="hash-link" href="#hw사양" title="Direct link to heading">​</a></h2><p>기구부 설계 경험과 PCB설계 경험을 되살려 하드웨어를 직접 설계하였습니다.<br>
<!-- -->설계 단계에서 PCB와 기구부를 함께 고려해야 재작업 비용을 줄일 수 있다는 사실을 직접 경험해 보았습니다.  </p><ul><li>PCB 5회 설계 변경 x 기구부 3회 설계 변경</li><li>중간중간 수시로 변경된 작은 사항들(부품변경, PCB 사이즈 변경 등)을 포함하면 더 많은 설계변경이 발생하였음</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="electronic">Electronic<a class="hash-link" href="#electronic" title="Direct link to heading">​</a></h3><p>전장부는 총 5회 설계 변경을 통해 최종안을 확정하였고,<br>
<!-- -->wifi가 통합된 MCU, 가속도 및 각속도 측정을 위한 MEMS센서로 구성되어 있습니다.
<a target="_blank" href="/webpage41221/assets/files/smartGuard_BOM_Lists-1bc7abe0207d2e37789bf1513146f503.pdf">(smartGaurd BOM Lists)</a>  </p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_hw_schematic-ec736c0157ab81cfdee727c9720f826f.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mechanic">Mechanic<a class="hash-link" href="#mechanic" title="Direct link to heading">​</a></h3><p>기구부는 총 3회 설계 변경을 통해 최종안을 확정하였고,<br>
<!-- -->상/하부커버, 자석, 받침대, 볼트, 9V 배터리, 전원케이블로 구성되어 있습니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_hw_update-bf05e7ee1f42e391f746bcd22c5d2d08.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><ul><li>1회(좌) 초안<ul><li>4개의 볼트로 상/하부 케이스를 고정</li><li>1.5V AAA Battery 2개 사용</li><li>전원 스위치 없음</li></ul></li><li>2회(중) 컨셉추가<ul><li>9V Battery 1개로 전원공급 변경</li><li>전원 스위치 추가 (상부 Case와 PCB 분리가 불가능)</li><li>좌측 접시머리볼트 1개로 케이스 고정</li></ul></li><li>3회(우) 최종안<ul><li>상부 Case와 PCB 분리가 가능하도록 전원 스위치 변경</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hw통합">HW통합<a class="hash-link" href="#hw통합" title="Direct link to heading">​</a></h3><p>PCB는 2층기판으로 Top면에 모든 부품이 배치되도록 설계 하였습니다.<br>
<!-- -->Top면에는 Vcc, Bottom면에는 GND로 Copper를 채웠습니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_hw_pcb_3d-60e084ef0522c90a070a968ba22deb91.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sw사양">SW사양<a class="hash-link" href="#sw사양" title="Direct link to heading">​</a></h2><p>소프트웨어는 smartGaurd는 AUTOSAR 컨셉을 적용하여 MCU 변경 시 HW를 직접 제어하는 Firmware Layer와, HW의존적인 Abstraction Layer와, HW독립적인 Application Layer로 나눠 각각 개발한 다음 통합되었습니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_arch_all-53267a1cfe0ac706b76bd52dc4c13bfa.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="firmware-layer-sw">Firmware Layer SW<a class="hash-link" href="#firmware-layer-sw" title="Direct link to heading">​</a></h3><p>6개(i2c, uart, spi, gpio, wifi adc)의 Peripherals를 제어하기 위한 펌웨어로 구성되어 있으며, 각 펌웨어 용도는 다음과 같습니다.</p><ul><li>i2c  : MPU6050 센서 인터페이스</li><li>uart : 디버그 콘솔</li><li>spi  : Flash Memory Interface</li><li>gpio : Alarm</li><li>wifi : 웹서버/파일서버 무선 연결</li><li>adc  : 배터리 전압 모니터링</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="abstraction-layer-sw">Abstraction Layer SW<a class="hash-link" href="#abstraction-layer-sw" title="Direct link to heading">​</a></h3><p>Application은 HW Peripherals를 제어하는 FW에 직접 접근하지 않고, abs_func이라고 하는 Abstraction Function을 통해 HW Peripherals에 접근합니다. MCU 교체로 인해 FW가 변경되더라도 abs_func 인터페이스만 조정하여 APP을 변경하지 않고 재사용 될 수 있게 합니다.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-layer-sw">Application Layer SW<a class="hash-link" href="#application-layer-sw" title="Direct link to heading">​</a></h3><p>Application은 Auto Code 영역과, Manual Code 영역으로 구분하여 개발되었습니다.</p><div style="width:100%"><img loading="lazy" src="/webpage41221/assets/images/ews2_spec_sw_arch_app-beeff01ad31bbce82822ecf9c0ee399c.png" style="width:100%" alt="Example banner" class="img_ev3q"></div><ul><li>Auto Code<br>기능로직을 실행하는 Application Layer SW 중 신호처리 기능(Kalman Filter학습 및 시뮬레이션)과 및 열림/닫힘 판단기능은 MBD 시뮬레이션으로 로직을 개발/검증하고, 자동생성된 C코드를 적용하였습니다.</li><li>Manual Code<br>wifi로 웹서버에 접속하여 MCU FW를 업데이트하는 기존 개발내용을 재사용하여 웹페이지를 통해 시스템의 상태를 모니터링 하는 기능과 원격에서 펌웨어를 업데이트하는 Self OTA 기능을 추가하였습니다.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/chuldongshim/webpage41221/docs/2_history/1_embed/2_controller/4_smartdoor/b_ews2_spec.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/webpage41221/docs/history/embed/controller/smartdoor/sd_guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">+ 사용법</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/webpage41221/docs/history/embed/controller/ethernetM"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CAN이더넷 통신모듈 (Updating)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#개요" class="table-of-contents__link toc-highlight">개요</a><ul><li><a href="#ews2-management" class="table-of-contents__link toc-highlight">프로젝트 관리</a></li><li><a href="#개발전략" class="table-of-contents__link toc-highlight">개발전략</a></li></ul></li><li><a href="#시스템-사양" class="table-of-contents__link toc-highlight">시스템 사양</a><ul><li><a href="#주요기능" class="table-of-contents__link toc-highlight">주요기능</a></li><li><a href="#열림닫힘-판단" class="table-of-contents__link toc-highlight">열림/닫힘 판단</a></li><li><a href="#로그인" class="table-of-contents__link toc-highlight">로그인</a></li><li><a href="#상태정보-모니터링" class="table-of-contents__link toc-highlight">상태정보 모니터링</a></li><li><a href="#소프트웨어-업데이트" class="table-of-contents__link toc-highlight">소프트웨어 업데이트</a></li></ul></li><li><a href="#hw사양" class="table-of-contents__link toc-highlight">HW사양</a><ul><li><a href="#electronic" class="table-of-contents__link toc-highlight">Electronic</a></li><li><a href="#mechanic" class="table-of-contents__link toc-highlight">Mechanic</a></li><li><a href="#hw통합" class="table-of-contents__link toc-highlight">HW통합</a></li></ul></li><li><a href="#sw사양" class="table-of-contents__link toc-highlight">SW사양</a><ul><li><a href="#firmware-layer-sw" class="table-of-contents__link toc-highlight">Firmware Layer SW</a></li><li><a href="#abstraction-layer-sw" class="table-of-contents__link toc-highlight">Abstraction Layer SW</a></li><li><a href="#application-layer-sw" class="table-of-contents__link toc-highlight">Application Layer SW</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/webpage41221/docs/introduce">자기소개</a></li><li class="footer__item"><a class="footer__link-item" href="/webpage41221/docs/mycareer">경력요약</a></li><li class="footer__item"><a class="footer__link-item" href="/webpage41221/docs/history">경력상세</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/webpage41221/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/chuldongshim/webpage41221" target="_blank" rel="noopener noreferrer" class="footer__link-item">MyGitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 My Project, Inc.</div></div></div></footer></div>
<script src="/webpage41221/assets/js/runtime~main.fd11567f.js"></script>
<script src="/webpage41221/assets/js/main.df97d9e4.js"></script>
</body>
</html>